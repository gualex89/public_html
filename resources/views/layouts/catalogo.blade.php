<!DOCTYPE html>
<html lang="en">

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta http-equiv="x-ua-compatible" content="ie=edge">

		<title>Makena</title>
		<link rel="shortcut icon" href="images/logo/makenaminiicon.png">

		<!-- fraimwork - css include -->
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">

		<!-- icon - css include -->
		<link rel="stylesheet" type="text/css" href="css/fontawesome.css">

		<!-- animation - css include -->
		<link rel="stylesheet" type="text/css" href="css/animate.css">

		<!-- nice select - css include -->
		<link rel="stylesheet" type="text/css" href="css/nice-select.css">

		<!-- carousel - css include -->
		<link rel="stylesheet" type="text/css" href="css/slick.css">
		<link rel="stylesheet" type="text/css" href="css/slick-theme.css">

		<!-- popup images & videos - css include -->
		<link rel="stylesheet" type="text/css" href="css/magnific-popup.css">

		<!-- jquery ui - css include -->
		<link rel="stylesheet" type="text/css" href="css/jquery-ui.css">

		<!-- custom - css include -->
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<style>
			.sb_category ul ul {
				display: none;
				list-style: none;
			}
	
			
			.sb_category ul li.active > ul {
				display: block;
			}
		</style>

	</head>


	<body class="home_motorcycle">


		<!-- backtotop - start -->
		<div id="thetop"></div>
		<div class="backtotop bg_carparts_red">
			<a href="#" class="scroll">
				<i class="far fa-arrow-up"></i>
			</a>
		</div>
		<!-- backtotop - end -->

		<!-- preloader - start -->
		<!-- <div id="preloader"></div> -->
		<!-- preloader - end -->


		<!-- header_section - start
		================================================== -->
		<header class="header_section motorcycle_header sticky_header clearfix">
			<div class="header_content_wrap d-flex align-items-center">
				<div class="container-fluid prl_90">
					<div class="row align-items-center">
						<div class="col-lg-2">
							<div class="brand_logo">
								<a class="brand_link" href="/">
									<img src="images/logo/logomakena.png" srcset="images/logo/logomakena.png 2x" alt="logo_not_found">
								</a>

								<ul class="mh_action_btns ul_li clearfix">
									<li>
										<button type="button" class="search_btn" data-toggle="collapse" data-target="#search_body_collapse" aria-expanded="false" aria-controls="search_body_collapse">
											<i class="fal fa-search"></i>
										</button>
									</li>
									<li>
										<button type="button" class="cart_btn">
											<i class="fal fa-shopping-cart"></i>
											<span class="btn_badge">0</span>
										</button>
									</li>
									<li><button type="button" class="mobile_menu_btn"><i class="far fa-bars"></i></button></li>
								</ul>
							</div>
						</div>

						<div class="col-lg-6">
							<nav class="main_menu clearfix">
								<ul class="ul_li_center clearfix">
									<li class="menu_item_has_child">
										<a href="/">Home</a>
									</li>
									<li class="menu_item_has_child">
										<a href="/catalogo">Catálogo</a>
									</li>
									<li class="menu_item_has_child">
										<a href="/tufunda">Crea tu Funda</a>
									</li>
								</ul>
							</nav>
						</div>

						<div class="col-lg-4">
							<ul class="action_items ul_li_right clearfix">
								
								<li>
									<button type="button" class="cart_btn">CARRITO <small class="btn_badge">0</small></button>
								</li>
								<li>
									<button type="button" class="mobile_menu_btn bg_carparts_red">
										<i class="fas fa-th"></i>
									</button>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			
		</header>
		<!-- header_section - end
		================================================== -->


		<!-- main body - start
		================================================== -->
		<main>


			<!-- sidebar mobile menu & sidebar cart - start
			================================================== -->
			<div class="sidebar-menu-wrapper">
				<div class="cart_sidebar">
					<button type="button" class="close_btn"><i class="fal fa-times"></i></button>

					<ul class="cart_items_list ul_li_block mb_30 clearfix">
						
					</ul>

					<ul class="total_price ul_li_block mb_30 clearfix">
						<li>
							<span>Subtotal:</span>
							<span>$0</span>
						</li>
						
						
						<li>
							<span>Total:</span>
							<span>$0</span>
						</li>
					</ul>

					<ul class="btns_group ul_li_block clearfix">
						<li><a href="/carrito">Ir al carrito</a></li>
						
					</ul>
				</div>

				<div class="sidebar_mobile_menu">
					<button type="button" class="close_btn"><i class="fal fa-times"></i></button>

					<div class="msb_widget brand_logo text-center">
						<a href="/">
							<img src="images/logo/logo_25_1x.png" srcset="images/logo/logo_black.png" alt="logo_not_found">
						</a>
					</div>

					<div class="msb_widget mobile_menu_list clearfix">
						<h3 class="title_text mb_15 text-uppercase"><i class="far fa-bars mr-2"></i> Menu</h3>
						<ul class="ul_li_block clearfix">
							<li>
								<a href="/" aria-haspopup="true" aria-expanded="false">Home</a>
							</li>
							<li>
								<a href="/catalogo" aria-haspopup="true" aria-expanded="false">Catálogo</a>
							</li>
							<li>
								<a href="/tufunda" aria-haspopup="true" aria-expanded="false">Crea tu Funda</a>
							</li>
						</ul>
					</div>
				</div>

				<div class="overlay"></div>
			</div>
			<!-- sidebar mobile menu & sidebar cart - end
			================================================== -->


			<!-- breadcrumb_section - start
			================================================== -->
			<section class="breadcrumb_section motorcycle_breadcrumb has_overlay text-white text-center d-flex align-items-end clearfix" data-background="images/slider/motorcycle/bg_01.webp">
				<div class="overlay" data-bg-color="#191919"></div>
				
			</section>
			<!-- breadcrumb_section - end
			================================================== -->
			<!-- product_section - start
			================================================== -->
			<section class="product_section sec_ptb_50 clearfix">
				<div class="container maxw_1430">
					<div class="row justify-content-lg-between">
						<div class="col-lg-9 order-last">
							<div class="tab-content">
								<div id="grid_layout" class="tab-pane active">
									<div class="row mb_50 justify-content-center">
										@foreach($imagesCatalogo as $image)
										<div class="col-lg-4 col-md-4 col-sm-6 col-xs-12 image-item" data-category="{{ substr($image->file_name, 0, 2) }}">
											<div class="motorcycle_product_grid">
												<div class="item_image">
													<img src="{{ Voyager::image($image->image) }}" alt="{{ $image->file_name }}">
													<ul class="product_action_btns ul_li_block text-uppercase text-center clearfix">
														<li><a href="#!"><span><i class="fas fa-shopping-cart"></i></span> <span>Agregar al Carrito</span></a></li>
														
													</ul>
												</div>
												<div class="item_content">
													<span class="item_price">{{$precioFundas}}</span>
													<h3  class="item_title" id="codigo_producto">
														<a href="#!">{{$image->file_name}}</a>
													</h3>
													<ul class="rating_star ul_li clearfix">
														<li><i class="fas fa-star"></i></li>
														<li><i class="fas fa-star"></i></li>
														<li><i class="fas fa-star"></i></li>
														<li><i class="fas fa-star"></i></li>
														<li><i class="fas fa-star"></i></li>
													</ul>
												</div>
											</div>
										</div>
										@endforeach
									</div>
								</div>
							</div>
						</div>
						
						<div class="col-lg-3">
							<aside class="motorcycle_sidebar sidebar_section" data-bg-color="#f9f9f9">
								<div class="sb_widget sb_category">
									<h3 class="sb_widget_title">Categories</h3>
									<ul class="ul_li_block clearfix">
										<li class="parent"><a href="#" data-category="all">Todas</a></li>
										<li class="parent"><a href="#" >Anime</a>
											<ul>
												<li><a href="#" data-category="DB">Dragon Ball</a></li>
												<li><a href="#" data-category="OP">One Piece</a></li>
											</ul>
										</li>
										<li class="parent"><a href="#!" data-category="FT">Fútbol</a>
											<ul>
												<li><a href="#">Messi</a></li>
												<li><a href="#">Equipos</a></li>
											</ul>
										</li>
										<li class="parent"><a href="#!" data-category="MU">Música</a>
											<ul>
												<li><a href="#">Géneros</a></li>
												<li><a href="#">Artistas</a></li>
											</ul>
										</li>
									</ul>
								</div>

								

								<div class="sb_widget sb_recent_post">
									<h3 class="sb_widget_title">Más Vendidos</h3>
									<div class="carparts_small_blog">
										<a  href="blog_details.html">
											<img src="images/masVendido2.png" alt="image_not_found">
										</a>
										<div class="item_content">
											<ul class="rating_star ul_li clearfix">
												<li><i class="fas fa-star"></i></li>
												<li><i class="fas fa-star"></i></li>
												<li><i class="fas fa-star"></i></li>
												<li><i class="fas fa-star"></i></li>
												<li><i class="fas fa-star"></i></li>
											</ul>
											<h3 class="item_title text-uppercase">
												<a href="blog_details.html">
													DB-11
												</a>
											</h3>
											<div class="item_price"><strong data-text-color="#39b54a">{{$precioFundas}}</strong> </div>
										</div>
									</div>

									<div class="carparts_small_blog">
										<a  href="blog_details.html">
											<img src="images/masVendido2.png" alt="image_not_found">
										</a>
										<div class="item_content">
											<ul class="rating_star ul_li clearfix">
												<li><i class="fas fa-star"></i></li>
												<li><i class="fas fa-star"></i></li>
												<li><i class="fas fa-star"></i></li>
												<li><i class="fas fa-star"></i></li>
												<li><i class="fas fa-star"></i></li>
											</ul>
											<h3 class="item_title text-uppercase">
												<a href="blog_details.html">
													DB-33
												</a>
											</h3>
											<div class="item_price"><strong data-text-color="#39b54a">{{$precioFundas}}</strong></div>
										</div>
									</div>
								</div>
							</aside>
						</div>
					</div>
				</div>
			</section>
			<!-- product_section - end
			================================================== -->


			<!-- barnd_section - start
			================================================== -->
			<div class="barnd_section sec_ptb_50 clearfix">
				<div class="container maxw_1430">
					<div class="barnd_carousel clearfix">
						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/samsung.png" alt="logo_samsung">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/iphone.png" alt="logo_iphone">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/zte.png" alt="logo_zte">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/xiaomi.png" alt="logo_xiaomi">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/LG.png" alt="logo_LG">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/motorola.png" alt="logo_motorola">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/samsung.png" alt="logo_samsung">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/iphone.png" alt="logo_iphone">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/zte.png" alt="logo_zte">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/xiaomi.png" alt="logo_xiaomi">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/LG.png" alt="logo_LG">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/motorola.png" alt="logo_motorola">
							</a>
						</div>
					</div>
				</div>
			</div>
			<!-- barnd_section - end
			================================================== -->
			<!-- Modal -->
			<div class="modal fade" id="addToCartModal" tabindex="-1" role="dialog" aria-labelledby="addToCartModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
					<h3 class="modal-title" id="addToCartModalLabel">Selecciona tu modelo</h3>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					</div>
					<div class="modal-body">
						<div class="sb_widget sb_recent_post seleccionadores">
							<div class="sb_widget sb_category">
								
								<div class="col-lg-12">
									<select name="marcas" id="marcasDropdown">
										<option value="">Seleccione</option>
									</select>
								</div>
								<div class="col-lg-12">
									<select name="modelos" id="modelosDropdown">
										<option value="">Seleccione</option>
									</select>
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" id="addToCartModalOkButton" class="btn btn-secondary" data-dismiss="modal">OK</button>
					</div>
				</div>
				</div>
			</div>


		</main>
		<!-- main body - end
		================================================== -->


		<!-- footer_section - start
		================================================== -->
		<footer class="footer_section motorcycle_footer clearfix">
			<div class="footer_widget_area sec_ptb_100 clearfix" data-background="images/backgrounds/makenaFooterBackground.webp">
				<div class="container">
					<div class="row justify-content-lg-between">

						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
							<div class="footer_widget footer_about text-center">
								<div class="brand_logo mb_30">
									<a href="#!">
										<img src="images/logo/logomakena.png" alt="logo_not_found">
									</a>
								</div>

								<ul class="footer_contact_info ul_li_block mb_30 clearfix">
									<li><span>Email:</span> contacto@makenafundas.com.ar</li>
									<li><span>Teléfono:</span> 11 2244 4188</li>
								</ul>

								<ul class="circle_social_links ul_li clearfix justify-content-center d-flex">
									<li><a href="https://www.instagram.com/makenafundas/"><i class="fab fa-instagram"></i></a></li>
									<li><a href="http://wa.me/541122444188"><i class="fab fa-whatsapp"></i></a></li>
									<li><a href="https://www.facebook.com/makenafundas"><i class="fab fa-facebook-f"></i></a></li>
								</ul>
							</div>
						</div>

						

						

						

					</div>
				</div>
			</div>

			<div class="footer_bottom text-center" data-bg-color="#151515">
				<div class="container">
					<p class="copyright_text mb-0">
						© All Rights Reserved <a href="#!" class="author_link text-white">jthemes</a>
					</p>
				</div>
			</div>
		</footer>
		<!-- footer_section - end
		================================================== -->

		
		<!-- fraimwork - jquery include -->
		<script src="js/jquery-3.5.1.min.js"></script>
		<script src="js/popper.min.js"></script>
		<script src="js/bootstrap.min.js"></script>

		<!-- mobile menu - jquery include -->
        <script src="js/mCustomScrollbar.js"></script>

		<!-- google map - jquery include -->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDk2HrmqE4sWSei0XdKGbOMOHN3Mm2Bf-M&ver=2.1.6"></script>
        <script src="js/gmaps.min.js"></script>

		<!-- animation - jquery include -->
        <script src="js/parallaxie.js"></script>
        <script src="js/wow.min.js"></script>

		<!-- nice select - jquery include -->
        <script src="js/nice-select.min.js"></script>

		<!-- carousel - jquery include -->
        <script src="js/slick.min.js"></script>

		<!-- countdown timer - jquery include -->
        <script src="js/countdown.js"></script>

		<!-- popup images & videos - jquery include -->
        <script src="js/magnific-popup.min.js"></script>

		<!-- filtering & masonry layout - jquery include -->
        <script src="js/isotope.pkgd.min.js"></script>
        <script src="js/masonry.pkgd.min.js"></script>
        <script src="js/imagesloaded.pkgd.min.js"></script>

		<!-- jquery ui - jquery include -->
        <script src="js/jquery-ui.js"></script>

		<!-- custom - jquery include -->
		<script src="js/custom.js"></script>
		<script>
			$(document).ready(function() {
				// Mostrar todas las imágenes al cargar la página
				showImages('all');

				// Manejar el clic en los enlaces de filtrado
				$('a[data-category]').on('click', function(e) {
					e.preventDefault();
					var category = $(this).data('category');
					showImages(category);
				});

				// Función para mostrar/ocultar imágenes según la categoría
				function showImages(category) {
					$('.image-item').hide(); // Ocultar todas las imágenes

					if (category === 'all') {
						$('.image-item').show(); // Mostrar todas las imágenes si la categoría es 'all'
					} else {
						$('.image-item[data-category="' + category + '"]').show(); // Mostrar imágenes de la categoría seleccionada
					}
				}
			});
			document.addEventListener('DOMContentLoaded', function () {
				const parentItems = document.querySelectorAll('.parent');

				parentItems.forEach(item => {
					item.addEventListener('click', function (event) {
						event.preventDefault();
						this.classList.toggle('active');

						// Desactivar todas las categorías
						parentItems.forEach(parent => {
                        	if (parent !== this && parent.classList.contains('active')) {
                            	parent.classList.remove('active');
                        	}
                    	});
						// Activar la categoría seleccionada
						
					});
				});
			});

		</script>
		
		<script>
			document.addEventListener("DOMContentLoaded", function() {
				let cartItemCount = 0;
				let subtotal = 0;
				let total = 0;
				let cartItems = [];
		
				function updateCartCounter() {
					const badgeElements = document.querySelectorAll('.btn_badge');
					badgeElements.forEach(function(element) {
						element.textContent = cartItemCount;
					});
				}
		
				function updatePrices() {
					const subtotalElement = document.querySelector('.total_price li:nth-child(1) span:nth-child(2)');
					const totalElement = document.querySelector('.total_price li:nth-child(2) span:nth-child(2)');
		
					subtotalElement.textContent = `$${subtotal}`;
					totalElement.textContent = `$${total}`;
				}
		
				let price, itemName, imageUrl; // Definir las variables fuera de la función addToCart

				function addToCart(productItem) {
					price = parseFloat(productItem.querySelector('.item_price').textContent.replace('$', ''));
					itemName = productItem.querySelector('.item_title').textContent;
					imageUrl = productItem.querySelector('img').getAttribute('src'); // Obtener la URL de la imagen completa
					
					// Mostrar la modal
					$('#addToCartModal').modal('show');
				}

				// Agregar un manejador de eventos para el botón "OK" dentro de la modal
				document.getElementById('addToCartModalOkButton').addEventListener('click', function() {
					const selectedMarca = document.getElementById('marcasDropdown').value;
					const selectedModelo = document.getElementById('modelosDropdown').value;

					const pendingCartItem = {
						name: itemName,
						price: price,
						image: imageUrl,
						marca: selectedMarca,
						modelo: selectedModelo
					};
					console.log("aqui")
					console.log(price)
					console.log("hasta aqui")

					// Agregar el artículo al carrito
					cartItemCount++;
					subtotal += pendingCartItem.price;
					total = subtotal;
					cartItems.push(pendingCartItem);
					localStorage.setItem('cartItems', JSON.stringify(cartItems));
					updateCartItems();
					updatePrices();

					// Cerrar la modal
					$('#addToCartModal').modal('hide');

					// Eliminar el manejador de eventos para evitar que se acumulen
					document.getElementById('addToCartModalOkButton').removeEventListener('click');
				});

				function updateCartItems() {
					const cartItemsList = document.querySelector('.cart_items_list');
					cartItemsList.innerHTML = ''; // Limpiar la lista de elementos del carrito

					cartItems.forEach(cartItem => {
						const cartItemHTML = `
							<li>
								<div class="item_image">
									<img src="${cartItem.image}" alt="${cartItem.name}">
								</div>
								<div class="item_content">
									<h4 class="item_title">${cartItem.name}</h4>
									<p> ${cartItem.marca} ${cartItem.modelo}</p> 
									
									<span class="item_price">$${cartItem.price}</span>
								</div>
								<div>
								<button type="button" class="remove_btn_carrito"><i class="fal fa-trash-alt remove_btn"></i></button>
								</div>
							</li>
						`;
						cartItemsList.innerHTML += cartItemHTML;
					});

					// Actualizar el contador del carrito
					updateCartCounter();
				}
		
				// Restaurar el carrito al cargar la página
				function restoreCart() {
					const storedCartItems = localStorage.getItem('cartItems');
					if (storedCartItems) {
						cartItems = JSON.parse(storedCartItems);
						cartItemCount = cartItems.length;
						cartItems.forEach(cartItem => {
							subtotal += cartItem.price;
						});
						total = subtotal;
		
						updateCartItems();
						updatePrices();
					}
				}
				function removeFromCart(item) {
					const itemName = item.querySelector('.item_title').textContent;
					
					// Encontrar el índice del elemento a eliminar en cartItems
					const indexToRemove = cartItems.findIndex(cartItem => cartItem.name === itemName);
					
					if (indexToRemove !== -1) { // Verificar si se encontró el elemento
						const price = cartItems[indexToRemove].price;
						
						// Actualizar subtotal y total
						subtotal -= price;
						total = subtotal;
						
						// Eliminar el elemento del carrito
						cartItems.splice(indexToRemove, 1);
						
						// Actualizar el almacenamiento local
						localStorage.setItem('cartItems', JSON.stringify(cartItems));
						
						// Actualizar el contador del carrito
						cartItemCount--;
						
						// Actualizar la visualización del carrito
						updateCartItems();
						updatePrices();
						updateCartCounter(); // Actualizar el contador del carrito
					}
				}
					
		
				// Llamar a la función para restaurar el carrito al cargar la página
				restoreCart();
		
				document.querySelectorAll('.product_action_btns a').forEach(btn => {
					btn.addEventListener('click', function(event) {
						event.preventDefault();
						const productItem = this.closest('.motorcycle_product_grid');
						addToCart(productItem);
					});
				});
		
				document.querySelector('.cart_items_list').addEventListener('click', function(event) {
					if (event.target.classList.contains('remove_btn')) {
						const item = event.target.closest('li');
						removeFromCart(item);
					}
				});
			});
		</script>
		<script>
			$(document).ready(function() {
				// Cargar marcas al cargar la página
				$.get('/obtener-marcas', function(data) {
					console.log(data);
					
					data.forEach(function(marca) {
						$('#marcasDropdown').append('<option value="' + marca + '">' + marca + '</option>');
						$('#marcasDropdown').niceSelect('update');
					});
				});
		
				// Manejar cambio en el dropdown de marcas
				$('#marcasDropdown').change(function() {
					var marcaSeleccionada = $(this).val();
		
					// Hacer una solicitud AJAX para obtener modelos según la marca seleccionada
					$.get('/obtener-modelos/' + marcaSeleccionada, function(data) {
						// Limpiar modelos existentes
						$('#modelosDropdown').empty();
		
						// Llenar modelos
						data.forEach(function(modelo) {
							$('#modelosDropdown').append('<option value="' + modelo + '">' + modelo + '</option>');
							$('#modelosDropdown').niceSelect('update');
						});
					});
				});
			});
		</script>
		
		
		
		
		

			
		

		
	</body>
</html>