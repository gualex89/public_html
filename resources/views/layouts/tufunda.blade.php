<!DOCTYPE html>
<html lang="en">

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta http-equiv="x-ua-compatible" content="ie=edge">

		<title>Makena</title>
		<link rel="shortcut icon" href="images/logo/makenaMiniIcon.png">

		<!-- fraimwork - css include -->
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">

		<!-- icon - css include -->
		<link rel="stylesheet" type="text/css" href="css/fontawesome.css">

		<!-- animation - css include -->
		<link rel="stylesheet" type="text/css" href="css/animate.css">

		<!-- nice select - css include -->
		<link rel="stylesheet" type="text/css" href="css/nice-select.css">

		<!-- carousel - css include -->
		<link rel="stylesheet" type="text/css" href="css/slick.css">
		<link rel="stylesheet" type="text/css" href="css/slick-theme.css">

		<!-- popup images & videos - css include -->
		<link rel="stylesheet" type="text/css" href="css/magnific-popup.css">

		<!-- jquery ui - css include -->
		<link rel="stylesheet" type="text/css" href="css/jquery-ui.css">

		<!-- custom - css include -->
		<link rel="stylesheet" type="text/css" href="css/style.css">

		<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.5.0/fabric.min.js"></script>
	</head>


	<body class="home_motorcycle">


		<!-- backtotop - start -->
		<div id="thetop"></div>
		<div class="backtotop bg_carparts_red">
			<a href="#" class="scroll">
				<i class="far fa-arrow-up"></i>
			</a>
		</div>
		<!-- backtotop - end -->

		<!-- preloader - start -->
		<!-- <div id="preloader"></div> -->
		<!-- preloader - end -->


		<!-- header_section - start
		================================================== -->
		<header class="header_section motorcycle_header sticky_header clearfix">
			<div class="header_content_wrap d-flex align-items-center">
				<div class="container-fluid prl_90">
					<div class="row align-items-center">
						<div class="col-lg-2">
							<div class="brand_logo">
								<a class="brand_link" href="/">
									<img src="images/logo/logoMakena.png" srcset="images/logo/logoMakena.png 2x" alt="logo_not_found">
								</a>

								<ul class="mh_action_btns ul_li clearfix">
									<li>
										<button type="button" class="search_btn" data-toggle="collapse" data-target="#search_body_collapse" aria-expanded="false" aria-controls="search_body_collapse">
											<i class="fal fa-search"></i>
										</button>
									</li>
									<li>
										<button type="button" class="cart_btn">
											<i class="fal fa-shopping-cart"></i>
											<span class="btn_badge">2</span>
										</button>
									</li>
									<li><button type="button" class="mobile_menu_btn"><i class="far fa-bars"></i></button></li>
								</ul>
							</div>
						</div>

						<div class="col-lg-6">
							<nav class="main_menu clearfix">
								<ul class="ul_li_center clearfix">
									<li class="menu_item_has_child">
										<a href="/">Home</a>
									</li>
									<li class="menu_item_has_child">
										<a href="/catalogo">Catálogo</a>
									</li>
									<li class="menu_item_has_child">
										<a href="/tufunda">Crea tu Funda</a>
									</li>
								</ul>
							</nav>
						</div>

						<div class="col-lg-4">
							<ul class="action_items ul_li_right clearfix">
								
								<li>
									<button type="button" class="cart_btn">CARRITO<small class="btn_badge">0</small></button>
								</li>
								<li>
									<button type="button" class="mobile_menu_btn bg_carparts_red">
										<i class="fas fa-th"></i>
									</button>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			
		</header>
		<!-- header_section - end
		================================================== -->


		<!-- main body - start
		================================================== -->
		<main>


			<!-- sidebar mobile menu & sidebar cart - start
			================================================== -->
			<div class="sidebar-menu-wrapper">
				<div class="cart_sidebar">
					<button type="button" class="close_btn"><i class="fal fa-times"></i></button>

					<ul class="cart_items_list ul_li_block mb_30 clearfix">
						
					</ul>

					<ul class="total_price ul_li_block mb_30 clearfix">
						<li>
							<span>Subtotal:</span>
							<span>$0</span>
						</li>
						
						
						<li>
							<span>Total:</span>
							<span>$0</span>
						</li>
					</ul>

					<ul class="btns_group ul_li_block clearfix">
						<li><a href="/carrito">Ir al carrito</a></li>
						
					</ul>
				</div>

				<div class="sidebar_mobile_menu">
					<button type="button" class="close_btn"><i class="fal fa-times"></i></button>

					<div class="msb_widget brand_logo text-center">
						<a href="/">
							<img src="images/logo/logo_25_1x.png" srcset="images/logo/logo_black.png" alt="logo_not_found">
						</a>
					</div>

					<div class="msb_widget mobile_menu_list clearfix">
						<h3 class="title_text mb_15 text-uppercase"><i class="far fa-bars mr-2"></i> Menu</h3>
						<ul class="ul_li_block clearfix">
							<li>
								<a href="/" aria-haspopup="true" aria-expanded="false">Home</a>
							</li>
							<li>
								<a href="/catalogo" aria-haspopup="true" aria-expanded="false">Catálogo</a>
							</li>
							<li>
								<a href="/tufunda" aria-haspopup="true" aria-expanded="false">Crea tu Funda</a>
							</li>
						</ul>
					</div>
				</div>

				<div class="overlay"></div>
			</div>
			<!-- sidebar mobile menu & sidebar cart - end
			================================================== -->


			<!-- breadcrumb_section - start
			================================================== -->
			<section class="breadcrumb_section motorcycle_breadcrumb has_overlay text-white text-center d-flex align-items-end clearfix" data-background="images/slider/motorcycle/bg_01.webp">
				<div class="overlay" data-bg-color="#191919"></div>
				
			</section>
			<!-- breadcrumb_section - end
			================================================== -->
			<!-- product_section - start
			================================================== -->
			<section class="product_section sec_ptb_50 clearfix">
				<div class="container maxw_1430">
					<div class="row justify-content-lg-between">
						<div class="col-lg-9 order-last">
							<div class="tab-content">
								<div id="grid_layout" class="tab-pane active">
									<div class="row mb-50 justify-content-center text-center">
										<div class="boton_slider bg_carparts_red" >
											<a class="deslizador">
												<i class="far fa-arrow-left" onclick="mostrarDesplegable()"></i>
											</a>
										</div>

										<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 image-item">
											<div class="col-lg-12 ">
												<canvas id="canvas" width="383" height="500" class="mx-auto d-block"></canvas>
											</div>
											<div class="col-lg-12 barra_de_texto">
												<button onclick="enviarAlFondo()" class="css-button css-button-sliding-to-bottom css-button-sliding-to-bottom--rose buttons-editor"> Mover Imagen</button>
												<button onclick="cambiarOrden()" class="css-button css-button-sliding-to-bottom css-button-sliding-to-bottom--rose buttons-editor"> Previsualizar</button>
												<button onclick="eliminarElementoSeleccionado()" class="css-button css-button-sliding-to-bottom css-button-sliding-to-bottom--rose buttons-editor"> Eliminar Elemento</button>
											</div>
											<div class="col-lg-12 barra_de_texto">
												<input type="file" id="imageLoader" style="display: none;"/>
												<button onclick="cargarImagen()" class="css-button css-button-rounded css-button-rounded--rose"> Subir imagen </button>
											</div>
											<div class="col-lg-12 barra_de_texto">
												<button id="btn">Generar imagen</button>
											</div>
										</div>
										
										
											<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" id="desplegableContainer">
												<div class="row">
													<div class="col-md-12">
														<button id="boton_cerrar" onclick="ocultarDesplegable()"><strong>Cerrar (X)</strong></button>
														<div class="desplegable_tu_funda" id="desplegable1">
															<div class="encabezado_tu_funda" onclick="toggleDesplegable('desplegable1')">
																<h2>Texto</h2>
															</div>
															<div class="contenido_del_desplegable">
																<div class="col-lg-12 barra_de_texto">
																	<button onclick="agregarTexto()" class="css-button css-button-sliding-to-bottom css-button-sliding-to-bottom--rose"> + Nuevo texto</button>
																	<input type="color" id="colorPicker" oninput="cambiarColorTexto(this.value)">
																</div>
																<div class="col-lg 12 barra_de_texto">
																	<button onclick="cambiarTipoDeLetra()" class="css-button css-button-sliding-to-bottom css-button-sliding-to-bottom--rose"> Cambiar Fuente</button>
																</div>
																<div class="col-lg-12 barra_de_texto">
																	<label for="tamañoLetra" class="d-block">Tamaño de letra</label>
																	<input type="range" id="textSizeSlider" min="10" max="70" value="20" oninput="cambiarTamanoTexto(this.value)">
																</div>
																<div class="col-lg12 barra_de_texto">
																	<label for="textRotationSlider" class="d-block">Rotación del Texto</label>
																	<input type="range" id="textRotationSlider" min="0" max="360" value="0" oninput="cambiarRotacionTexto(this.value)">
																</div>


															</div>
														</div>
													</div>
													<div class="col-md-12">
														<div class="desplegable_tu_funda" id="desplegable2">
															<div class="encabezado_tu_funda" onclick="toggleDesplegable('desplegable2')">
																<h2>Fondo</h2>
															</div>
															<div class="contenido_del_desplegable">
																<div class="col-lg-12 barra_de_texto">
																	<label for="canvasColorPicker">Color</label>
																	<input type="color" id="canvasColorPicker" oninput="cambiarColorCanvas(this.value)">
																</div>
															</div>
														</div>
														
														<button id="agregarAlCarritoBtn" class="css-button css-button-sliding-to-bottom css-button-sliding-to-bottom--rose buttons-editor"> Agregar al carrito</button>
														
														
														
													</div>
													
												</div>
											</div>
											
									</div>
								</div>
							</div>
						</div>

						<div class="col-lg-3 col-md-6 mx-auto">
							<aside class="motorcycle_sidebar sidebar_section" data-bg-color="#f9f9f9">
								<div class="sb_widget sb_recent_post seleccionadores">
									<div class="sb_widget sb_category">
										<h3 class="sb_widget_title">Selecciona tu modelo</h3>
										<div class="col-lg-12">
											<select name="marcas" id="marcasDropdown">
												<option value="">Seleccione</option>
											</select>
										</div>
										<div class="col-lg-12">
											<select name="modelos" id="modelosDropdown">
												<option value="">Seleccione</option>
											</select>
										</div>
									</div>
								</div>
								<div class="abtn_wrap col3 text-center mt-3" id="div_del_boton" data-animation="fadeInUp" data-delay=".8s">
									<div class="col-lg-12 col-md-12 col-sm-12">
										<a id="seleccionarModeloBtn" class="custom_btn bg_carparts_red text-uppercase special_button"  style=" max-width: 200px;">Seleccionar Modelo</a>
									</div>
									<div class="col-lg-12 col-md-12 col-sm-12">
										<a id="seleccionarModeloBtn" class="custom_btn bg_carparts_red text-uppercase special_button" style="max-width: 200px;" onclick="restablecerCanvas()">Empezar de Nuevo</a>
									</div>

								</div>
							</aside>
						</div>
					</div>
				</div>
			</section>

			
			<!-- product_section - end
			================================================== -->


			<!-- barnd_section - start
			================================================== -->
			<div class="barnd_section sec_ptb_50 clearfix">
				<div class="container maxw_1430">
					<div class="barnd_carousel clearfix">
						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/samsung.png" alt="logo_samsung">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/iphone.png" alt="logo_iphone">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/zte.png" alt="logo_zte">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/xiaomi.png" alt="logo_xiaomi">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/LG.png" alt="logo_LG">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/motorola.png" alt="logo_motorola">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/samsung.png" alt="logo_samsung">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/iphone.png" alt="logo_iphone">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/zte.png" alt="logo_zte">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/xiaomi.png" alt="logo_xiaomi">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/LG.png" alt="logo_LG">
							</a>
						</div>

						<div class="item">
							<a class="brand_item" href="#!">
								<img src="images/logos/motorola.png" alt="logo_motorola">
							</a>
						</div>
					</div>
				</div>
			</div>
			<!-- barnd_section - end
			================================================== -->


		</main>
		<!-- main body - end
		================================================== -->


		<!-- footer_section - start
		================================================== -->
		<footer class="footer_section motorcycle_footer clearfix">
			<div class="footer_widget_area sec_ptb_100 clearfix" data-background="images/backgrounds/makenaFooterBackground.webp">
				<div class="container">
					<div class="row justify-content-lg-between">

						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
							<div class="footer_widget footer_about text-center">
								<div class="brand_logo mb_30">
									<a href="#!">
										<img src="images/logo/logoMakena.png" srcset="images/logo/logo_22_2x.png 2x" alt="logo_not_found">
									</a>
								</div>

								<ul class="footer_contact_info ul_li_block mb_30 clearfix">
									<li><span>Email:</span> contacto@makenafundas.com.ar</li>
									<li><span>Teléfono:</span> 11 2244 4188</li>
								</ul>

								<ul class="circle_social_links ul_li clearfix justify-content-center d-flex">
									<li><a href="https://www.instagram.com/makenafundas/"><i class="fab fa-instagram"></i></a></li>
									<li><a href="http://wa.me/541122444188"><i class="fab fa-whatsapp"></i></a></li>
									<li><a href="https://www.facebook.com/makenafundas"><i class="fab fa-facebook-f"></i></a></li>
								</ul>
							</div>
						</div>

						

						

						

					</div>
				</div>
			</div>

			<div class="footer_bottom text-center" data-bg-color="#151515">
				<div class="container">
					<p class="copyright_text mb-0">
						© All Rights Reserved <a href="#!" class="author_link text-white">jthemes</a>
					</p>
				</div>
			</div>
		</footer>
		<!-- footer_section - end
		================================================== -->

		
		<!-- fraimwork - jquery include -->
		<script src="js/jquery-3.5.1.min.js"></script>
		
		<script src="js/popper.min.js"></script>
		<script src="js/bootstrap.min.js"></script>

		<!-- mobile menu - jquery include -->
        <script src="js/mCustomScrollbar.js"></script>

		<!-- google map - jquery include -->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDk2HrmqE4sWSei0XdKGbOMOHN3Mm2Bf-M&ver=2.1.6"></script>
        <script src="js/gmaps.min.js"></script>

		<!-- animation - jquery include -->
        <script src="js/parallaxie.js"></script>
        <script src="js/wow.min.js"></script>

		<!-- nice select - jquery include -->
        <script src="js/nice-select.min.js"></script>

		<!-- carousel - jquery include -->
        <script src="js/slick.min.js"></script>

		<!-- countdown timer - jquery include -->
        <script src="js/countdown.js"></script>

		<!-- popup images & videos - jquery include -->
        <script src="js/magnific-popup.min.js"></script>

		<!-- filtering & masonry layout - jquery include -->
        <script src="js/isotope.pkgd.min.js"></script>
        <script src="js/masonry.pkgd.min.js"></script>
        <script src="js/imagesloaded.pkgd.min.js"></script>
			 
		<!-- jquery ui - jquery include -->
        <script src="js/jquery-ui.js"></script>

		
		<!-- custom - jquery include -->
		
		<script src="js/custom.js"></script> 
		<script>
			$(document).ready(function() {
				// Mostrar todas las imágenes al cargar la página
				showImages('all');

				// Manejar el clic en los enlaces de filtrado
				$('a[data-category]').on('click', function(e) {
					e.preventDefault();
					var category = $(this).data('category');
					showImages(category);
				});

				// Función para mostrar/ocultar imágenes según la categoría
				function showImages(category) {
					$('.image-item').hide(); // Ocultar todas las imágenes

					if (category === 'all') {
						$('.image-item').show(); // Mostrar todas las imágenes si la categoría es 'all'
					} else {
						$('.image-item[data-category="' + category + '"]').show(); // Mostrar imágenes de la categoría seleccionada
					}
				}
			});
			document.addEventListener('DOMContentLoaded', function () {
				const parentItems = document.querySelectorAll('.parent');

				parentItems.forEach(item => {
					item.addEventListener('click', function (event) {
						event.preventDefault();
						this.classList.toggle('active');

						// Desactivar todas las categorías
						parentItems.forEach(parent => {
                        	if (parent !== this && parent.classList.contains('active')) {
                            	parent.classList.remove('active');
                        	}
                    	});
						// Activar la categoría seleccionada
						
					});
				});
			});
		</script>
		<script>
			function llenar_cmb2() {
				console.log("llenar_cmb2 se está llamando");
				var cmb1 = document.getElementById("cmb1");
				var cmb2 = document.getElementById("cmb2");
				console.log(cmb2);
				var valor = cmb1.value;
				var opciones_cmb2 = cmb2.options;
				// Limpiar las opciones actuales en cmb2
				opciones_cmb2.length = 1; // Deja el primer elemento "Seleccione"
				
				// Llenar cmb2 según la selección de cmb1
				if (valor === "motorola") {
					console.log("entro a motorola");
					agregarOpcion(cmb2, "moto1", "Moto 1");
					agregarOpcion(cmb2, "moto2", "Moto 2");
					agregarOpcion(cmb2, "moto3", "Moto 3");
					$('#cmb2').niceSelect('update');
				} else if (valor === "apple") {
					// Agregar opciones para la marca Apple
					agregarOpcion(cmb2, "iphone1", "iPhone 1");
					agregarOpcion(cmb2, "iphone2", "iPhone 2");
					$('#cmb2').niceSelect('update');
					// Puedes seguir añadiendo más opciones según sea necesario
				} else if (valor === "samsung") {
					// Agregar opciones para la marca Samsung
					agregarOpcion(cmb2, "galaxy1", "Galaxy 1");
					agregarOpcion(cmb2, "galaxy2", "Galaxy 2");
					$('#cmb2').niceSelect('update');
					// Puedes seguir añadiendo más opciones según sea necesario
				}
				// Puedes agregar más condiciones según las marcas que tengas
			
			}

   			 // Función auxiliar para agregar opciones al select
			function agregarOpcion(select, valor, texto) {
				var opcion = document.createElement("option");
				opcion.value = valor;
				opcion.text = texto;
				select.add(opcion);
			}
		</script>
		<script>
			$(document).ready(function() {
				// Cargar marcas al cargar la página
				$.get('/obtener-marcas', function(data) {
					console.log(data);
					
					data.forEach(function(marca) {
						$('#marcasDropdown').append('<option value="' + marca + '">' + marca + '</option>');
						$('#marcasDropdown').niceSelect('update');
					});
				});
		
				// Manejar cambio en el dropdown de marcas
				$('#marcasDropdown').change(function() {
					var marcaSeleccionada = $(this).val();
		
					// Hacer una solicitud AJAX para obtener modelos según la marca seleccionada
					$.get('/obtener-modelos/' + marcaSeleccionada, function(data) {
						// Limpiar modelos existentes
						$('#modelosDropdown').empty();
		
						// Llenar modelos
						data.forEach(function(modelo) {
							$('#modelosDropdown').append('<option value="' + modelo + '">' + modelo + '</option>');
							$('#modelosDropdown').niceSelect('update');
						});
					});
				});
			});
		</script>
		<script>
			$(document).ready(function() {
				// Manejar clic en el botón "Seleccionar Modelo"
				$('#seleccionarModeloBtn').click(function() {
					// Obtener el modelo seleccionado en el dropdown
					var modeloSeleccionado = $('#modelosDropdown').val();
					console.log(modeloSeleccionado)
					// Hacer una solicitud AJAX para obtener la información de la base de datos
					$.get('/obtener-imagen/' + modeloSeleccionado, function(data) {
						// La respuesta 'data' debería contener la información de la imagen u otro dato que necesitas
						console.log(data);
						var rutaImagen = "storage\\" + data[0]
						console.log(rutaImagen);
						cargarImagenDeFondo(rutaImagen);
						//$('#imagenResultado').attr('src', rutaImagen);
						
					});
				});
			});
		</script>
		<script>
			var canvas = new fabric.Canvas('canvas');
			var fondoImg, userImg, texto;
			var tiposDeLetra = [
				'Arial',
				'Comic Sans MS',
				'Impact',
				'Franklin Gothic Medium',
				'Arial Black',
				'Tahoma',
				'Lucida Sans Unicode',
				'Oswald'
			];
			var indiceTipoLetra = 0;
			function cargarImagen() {
				document.getElementById('imageLoader').click();
			}

		
			function cargarImagenDeFondo(url) {
				fabric.Image.fromURL(url, function (bgImg) {
					bgImg.set({
						selectable: false,
						crossOrigin: 'anonymous'  // Agrega esta línea
					});
					bgImg.scaleToWidth(canvas.width);
					bgImg.scaleToHeight(canvas.height);
					canvas.add(bgImg);
					fondoImg = bgImg;
				});
			}
			document.getElementById('imageLoader').addEventListener('change', function(e) {
			var file = e.target.files[0];
			var reader = new FileReader();
		
			reader.onload = function(e) {
				fabric.Image.fromURL(e.target.result, function(img) {
				if (img.width > 280) {
					img.scaleToWidth(280);
				}
				img.set({
					hasControls: true,
					hasBorders: true,
					selectable: true,
					cornerColor: 'red'
				});
		
				canvas.add(img);
				userImg = img;
				});
			};
		
			reader.readAsDataURL(file);
			});
			function cambiarColorCanvas(colorOrImage) {
				if (colorOrImage.startsWith("http") || colorOrImage.startsWith("data:")) {
				// Si la entrada parece ser una URL de imagen o datos de imagen,
				// la utilizamos como fondo de imagen.
				fabric.Image.fromURL(colorOrImage, function(img) {
					img.scaleToWidth(canvas.width);
					img.scaleToHeight(canvas.height);
					img.set({
					selectable: false
					});
					canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));
				});
				} else {
				// Si la entrada no parece ser una URL de imagen, la consideramos como un color.
				canvas.setBackgroundColor(colorOrImage);
				canvas.renderAll();
				}
			}
		
			function cambiarOrden() {
				if (userImg && fondoImg) {
				canvas.remove(fondoImg);
				canvas.remove(userImg);
				canvas.add(fondoImg);
				canvas.add(userImg);
				canvas.sendToBack(userImg);
				canvas.renderAll();
				}
			}
			function eliminarElementoSeleccionado() {
				var activeObject = canvas.getActiveObject();

				if (activeObject) {
				canvas.remove(activeObject);
				canvas.discardActiveObject();
				canvas.renderAll();
				}
			}
		
			function enviarAlFondo() {
			  if (fondoImg) {
				canvas.sendToBack(fondoImg);
				canvas.renderAll();
			}
			}
		
			function descargarImagenSubida() {
			if (userImg) {
				const dataURL = userImg.toDataURL("image/png");
				const a = document.createElement("a");
				a.download = "imagen_subida";
				a.href = dataURL;
				a.click();
			  }
			}
		
			function agregarTexto() {
			  texto = new fabric.Textbox('Texto aquí', {
				left: 50,
				top: 50,
				width: 200,
				fontSize: 20,
				fontFamily: tiposDeLetra[indiceTipoLetra],
				fill: 'black',
				selectable: true,
				hasControls: true,
				editable: true
			  });
		
			  canvas.add(texto);
			  canvas.setActiveObject(texto);
			  canvas.requestRenderAll();
			}
		
			function cambiarTipoDeLetra() {
			  if (canvas.getActiveObject() && canvas.getActiveObject().isType('textbox')) {
				var obj = canvas.getActiveObject();
				indiceTipoLetra = (indiceTipoLetra + 1) % tiposDeLetra.length;
				obj.set("fontFamily", tiposDeLetra[indiceTipoLetra]);
				canvas.requestRenderAll();
				console.log(tiposDeLetra[indiceTipoLetra]);
			  }
			}
		
			function cambiarColorTexto(color) {
			  if (canvas.getActiveObject() && canvas.getActiveObject().isType('textbox')) {
				var obj = canvas.getActiveObject();
				obj.set("fill", color);
				userImg && userImg.set("fill", color);
				canvas.requestRenderAll();
			  }
			}
		
			function aumentarTamano() {
			  cambiarTamanoTexto(2);
			}
		
			function reducirTamano() {
			  cambiarTamanoTexto(-2);
			}
		
			function cambiarTamanoTexto(delta) {
				if (canvas.getActiveObject() && canvas.getActiveObject().isType('textbox')) {
					var obj = canvas.getActiveObject();
					obj.set("fontSize", parseInt(delta));
					canvas.requestRenderAll();
				 }
			}
			
			function cambiarRotacionTexto(angulo) {
				if (canvas.getActiveObject() && canvas.getActiveObject().isType('textbox')) {
					var obj = canvas.getActiveObject();
					obj.set({
					"angle": parseInt(angulo),
					"originX": "center",
					"originY": "center"
					});
					canvas.requestRenderAll();
				}
			}
		
			btn.onclick = () => {
			  const dataURL = canvas.toDataURL("image/png");
			  const a = document.createElement("a");
			  a.download = "composicion";
			  a.href = dataURL;
			  a.click();
			  descargarImagenSubida();
			};
			function restablecerCanvas() {
    			canvas.clear();
				canvas.renderAll();
			}
			function mostrarDesplegable() {
				var desplegableContainer = document.getElementById('desplegableContainer');
				desplegableContainer.style.right = '0';
			}

			function ocultarDesplegable() {
				var desplegableContainer = document.getElementById('desplegableContainer');
				desplegableContainer.style.right = '-100%';
			}	
		</script>
		<script>
			function toggleDesplegable(id) {
				var desplegable = document.getElementById(id);
				var contenido = desplegable.querySelector('.contenido_del_desplegable');
		
				if (contenido.style.display === 'none' || contenido.style.display === '') {
					contenido.style.display = 'block';
				} else {
					contenido.style.display = 'none';
				}
			}
		</script>
		
		
		
		<script>
			document.addEventListener("DOMContentLoaded", function() {
				let cartItemCount = 0;
				let subtotal = 0;
				let total = 0;
				let cartItems = [];
		
				function updateCartCounter() {
					const badgeElements = document.querySelectorAll('.btn_badge');
					badgeElements.forEach(function(element) {
						element.textContent = cartItemCount;
					});
				}
		
				function updatePrices() {
					const subtotalElement = document.querySelector('.total_price li:nth-child(1) span:nth-child(2)');
					const totalElement = document.querySelector('.total_price li:nth-child(2) span:nth-child(2)');
		
					subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
					totalElement.textContent = `$${total.toFixed(2)}`;
				}
				const agregarAlCarritoBtn = document.getElementById('agregarAlCarritoBtn');

				// Agregar evento click al botón "Agregar al Carrito"
				agregarAlCarritoBtn.addEventListener('click', function() {
					const selectedMarca = document.getElementById('marcasDropdown').value;
					const selectedModelo = document.getElementById('modelosDropdown').value;
					const dataURL = canvas.toDataURL("image/png");
					
					// Agregar la URL de la imagen al cartItems
					const cartItem = {
						name: "Diseño personalizado", // Puedes darle un nombre apropiado al diseño
						price: 9550, // Puedes establecer un precio para el diseño si es necesario
						image: dataURL,
						marca: selectedMarca,
						modelo: selectedModelo // Guardar la URL de la imagen generada por el canvas
					};
					cartItemCount++;
					subtotal += cartItem.price;
					total = subtotal;

					// Agregar el elemento al arreglo cartItems
					cartItems.push(cartItem);

					// Guardar el carrito en el almacenamiento local (si es necesario)
					localStorage.setItem('cartItems', JSON.stringify(cartItems));
					updateCartCounter();
					updatePrices();
					updateCartItems();
					// Actualizar el contador del carrito y la visualización del carrito
					
					// Verificar si hay un diseño en el canvas
					
				});
			
					function addToCart(productItem) {
						const price = parseFloat(productItem.querySelector('.item_price').textContent.replace('$', ''));
						const itemName = productItem.querySelector('.item_title').textContent;
						const imageUrl = productItem.querySelector('img').getAttribute('src'); // Obtener la URL de la imagen completa
			
						cartItemCount++;
						subtotal += price;
						total = subtotal;
			
						const cartItem = {
							name: itemName,
							price: price,
							image: imageUrl // Guardar la URL completa de la imagen en el objeto del carrito
						};
			
						cartItems.push(cartItem);
			
						// Guardar el carrito en el almacenamiento local
						localStorage.setItem('cartItems', JSON.stringify(cartItems));
			
						// Llamar a la función para mostrar los elementos del carrito
						updateCartItems();
						updatePrices();
					}
		
				function updateCartItems() {
					const cartItemsList = document.querySelector('.cart_items_list');
					cartItemsList.innerHTML = ''; // Limpiar la lista de elementos del carrito
		
					cartItems.forEach(cartItem => {
						const cartItemHTML = `
							<li>
								<div class="item_image">
									<img src="${cartItem.image}" alt="${cartItem.name}"> <!-- Usar la URL de la imagen -->
								</div>
								<div class="item_content">
									<h4 class="item_title">${cartItem.name}</h4>
									<span class="item_price">$${cartItem.price.toFixed(2)}</span>
								</div>
								<button type="button" class="remove_btn"><i class="fal fa-trash-alt remove_btn"></i></button>
							</li>
						`;
						cartItemsList.innerHTML += cartItemHTML;
					});
		
					// Actualizar el contador del carrito
					updateCartCounter();
				}
		
				// Restaurar el carrito al cargar la página
				function restoreCart() {
					const storedCartItems = localStorage.getItem('cartItems');
					if (storedCartItems) {
						cartItems = JSON.parse(storedCartItems);
						cartItemCount = cartItems.length;
						cartItems.forEach(cartItem => {
							subtotal += cartItem.price;
						});
						total = subtotal;
		
						updateCartItems();
						updatePrices();
					}
				}
				function removeFromCart(item) {
					const itemName = item.querySelector('.item_title').textContent;
					
					// Encontrar el índice del elemento a eliminar en cartItems
					const indexToRemove = cartItems.findIndex(cartItem => cartItem.name === itemName);
					
					if (indexToRemove !== -1) { // Verificar si se encontró el elemento
						const price = cartItems[indexToRemove].price;
						
						// Actualizar subtotal y total
						subtotal -= price;
						total = subtotal;
						
						// Eliminar el elemento del carrito
						cartItems.splice(indexToRemove, 1);
						
						// Actualizar el almacenamiento local
						localStorage.setItem('cartItems', JSON.stringify(cartItems));
						
						// Actualizar el contador del carrito
						cartItemCount--;
						
						// Actualizar la visualización del carrito
						updateCartItems();
						updatePrices();
						updateCartCounter(); // Actualizar el contador del carrito
					}
				}
					
		
				// Llamar a la función para restaurar el carrito al cargar la página
				restoreCart();
		
				document.querySelectorAll('.product_action_btns a').forEach(btn => {
					btn.addEventListener('click', function(event) {
						event.preventDefault();
						const productItem = this.closest('.motorcycle_product_grid');
						addToCart(productItem);
					});
				});
		
				document.querySelector('.cart_items_list').addEventListener('click', function(event) {
					if (event.target.classList.contains('remove_btn')) {
						const item = event.target.closest('li');
						removeFromCart(item);
					}
				});
			});
		</script>
		

		
	</body>
</html>